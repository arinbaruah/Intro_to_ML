<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Arindom Baruah (32779267)">
<meta name="dcterms.date" content="2024-03-22">

<title>ETC3250/5250 Assignment 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="assign01-submission_Arindom_32779267_files/libs/clipboard/clipboard.min.js"></script>
<script src="assign01-submission_Arindom_32779267_files/libs/quarto-html/quarto.js"></script>
<script src="assign01-submission_Arindom_32779267_files/libs/quarto-html/popper.min.js"></script>
<script src="assign01-submission_Arindom_32779267_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assign01-submission_Arindom_32779267_files/libs/quarto-html/anchor.min.js"></script>
<link href="assign01-submission_Arindom_32779267_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assign01-submission_Arindom_32779267_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assign01-submission_Arindom_32779267_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assign01-submission_Arindom_32779267_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assign01-submission_Arindom_32779267_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="assign01-submission_Arindom_32779267_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="assign01-submission_Arindom_32779267_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="assignment.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ETC3250/5250 Assignment 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Arindom Baruah (32779267) </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 22, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="exercises" class="level1">
<h1>Exercises</h1>
<section id="basic-math-and-computing" class="level2">
<h2 class="anchored" data-anchor-id="basic-math-and-computing">1. Basic math and computing</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>S <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) <span class="co"># 2 X 2 Matrix creation</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="dv">4</span>,<span class="dv">2</span>) <span class="co"># 2 X 1 Matrix creation</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="dv">1</span>,<span class="sc">-</span><span class="dv">1</span>) <span class="co"># 2 X 1 Matric creation</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>Matrix_calculation <span class="ot">&lt;-</span> <span class="fu">t</span>(X<span class="sc">-</span>A) <span class="sc">%*%</span> <span class="fu">solve</span>(S) <span class="sc">%*%</span> (X<span class="sc">-</span>A) <span class="co">#Matrix multiplication</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The matrix calculation for computing <span class="math inline">\((X-A)^T S^{-1}(X-A)\)</span> yields the result <strong>5.4</strong>.</p>
</section>
<section id="ml-concepts" class="level2">
<h2 class="anchored" data-anchor-id="ml-concepts">2. ML concepts</h2>
<section id="a-model-accuracy" class="level3">
<h3 class="anchored" data-anchor-id="a-model-accuracy">a) Model accuracy</h3>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-data" class="anchored">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Table&nbsp;1: Sample rows of the current data</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">y</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pred1</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pred2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">bilby1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">bilby2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">quokka1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">quokka2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">bilby</td>
<td style="text-align: left;">bilby</td>
<td style="text-align: left;">bilby</td>
<td style="text-align: right;">0.8</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: right;">0.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">bilby</td>
<td style="text-align: left;">bilby</td>
<td style="text-align: left;">bilby</td>
<td style="text-align: right;">0.9</td>
<td style="text-align: right;">0.51</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">0.49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bilby</td>
<td style="text-align: left;">bilby</td>
<td style="text-align: left;">bilby</td>
<td style="text-align: right;">0.9</td>
<td style="text-align: right;">0.60</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">0.40</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>The computations to assess the model metrics are delineated in the panel tabsets below.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Model 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Model 2</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>The accuracy for <code>model 1</code> which is calculated based on the number of true positives and the true negatives is observed to be <strong>0.778</strong>.</p>
<p>However, the accuracy parameter for a model may not always be the best indicator. This is especially true when the data may contain unbalanced class distribution. In this case, we will rely on balanced accuracy which is based on the true positive and the true negative rate of prediction for the model.</p>
<p>The balanced accuracy for <code>model 1</code> is found to be <strong>0.775</strong>.</p>
<p><a href="#fig-confmat1">Figure&nbsp;1</a> illustrates the detailed confusion matrix for <code>model 1</code> with the critical model parameters which are useful indicators of model performance.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-confmat1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-confmat1-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Confusion matrix with key performance metrics of model 1</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>The accuracy for <code>model 2</code> which is calculated based on the number of true positives and the true negatives is observed to be <strong>0.63</strong>. The balanced accuracy for the same model which is based on the true positive and the true negative rates are <strong>0.629</strong>.</p>
<p><a href="#fig-confmat2">Figure&nbsp;2</a> illustrates the detailed confusion matrix for <code>model 2</code>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-confmat2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-confmat2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Confusion matrix with key performance metrics of model 2</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key takeaway
</div>
</div>
<div class="callout-body-container callout-body">
<p>As we can observe from the model metrics in <a href="#fig-confmat1">Figure&nbsp;1</a> and <a href="#fig-confmat2">Figure&nbsp;2</a>, the model 1 was observed to classify the labelled data more accurately than model 2.</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="b-sensitivity-and-specificity-with-revised-threshold-values" class="level3">
<h3 class="anchored" data-anchor-id="b-sensitivity-and-specificity-with-revised-threshold-values">b) Sensitivity and Specificity with revised threshold values</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Classification threshold of 0.3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Classification threshold of 0.4</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<section id="when-the-threshold-value-for-classification-in-model-1-is-0.3" class="level4">
<h4 class="anchored" data-anchor-id="when-the-threshold-value-for-classification-in-model-1-is-0.3">1) When the threshold value for classification in model 1 is 0.3</h4>
<p>The sensitivity for <code>model 1</code> when the threshold value for positive Bilby classification is 0.3 and above is <strong>0.958</strong>. The value for <strong>1-Specificity</strong> for the same model which is based on the true positive and the true negative rates is <strong>0.767</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-confmat_new_1a" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-confmat_new_1a-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Confusion matrix with key performance metrics of model 1 when considering 0.3 as the threshold value for positive Bilby classification</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="when-the-threshold-value-for-classification-in-model-2-is-0.3" class="level4">
<h4 class="anchored" data-anchor-id="when-the-threshold-value-for-classification-in-model-2-is-0.3">2) When the threshold value for classification in model 2 is 0.3</h4>
<div class="cell">
<div class="cell-output-display">
<div id="fig-confmat_new_2a" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-confmat_new_2a-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Confusion matrix with key performance metrics of model 2 when considering 0.3 as the threshold value for positive Bilby classification</figcaption>
</figure>
</div>
</div>
</div>
<p>The sensitivity for <code>model 2</code> when the threshold value for positive Bilby classification is 0.3 and above is <strong>0.833</strong>. The value for <strong>1-Specificity</strong> for the same model which is based on the true positive and the true negative rates is <strong>0.667</strong>. Other detailed model performance metrics for model 2 with a threshold value of 0.3 can be referred to in <a href="#fig-confmat_new_2a">Figure&nbsp;4</a>.</p>
</section>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<section id="when-the-threshold-value-for-classification-in-model-1-is-0.4" class="level4">
<h4 class="anchored" data-anchor-id="when-the-threshold-value-for-classification-in-model-1-is-0.4">1) When the threshold value for classification in model 1 is 0.4</h4>
<div class="cell">
<div class="cell-output-display">
<div id="fig-confmat_new_1b" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-confmat_new_1b-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;5: Confusion matrix with key performance metrics of model 1 when considering 0.4 as the threshold value for positive Bilby classification</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="when-the-threshold-value-for-classification-in-model-2-is-0.4" class="level4">
<h4 class="anchored" data-anchor-id="when-the-threshold-value-for-classification-in-model-2-is-0.4">2) When the threshold value for classification in model 2 is 0.4</h4>
<div class="cell">
<div class="cell-output-display">
<div id="fig-confmat_new_2b" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-confmat_new_2b-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Confusion matrix with key performance metrics of model 2 when considering 0.4 as the threshold value for positive Bilby classification</figcaption>
</figure>
</div>
</div>
</div>
<p>The sensitivity for <code>model 2</code> when the threshold value for positive Bilby classification is 0.4 and above is <strong>0.833</strong>. The value for <strong>1-Specificity</strong> for the same model which is based on the true positive and the true negative rates is <strong>0.467</strong>. Other detailed model performance metrics for model 2 with a threshold value of 0.3 can be referred to in <a href="#fig-confmat_new_2b">Figure&nbsp;6</a>.</p>
</section>
</div>
</div>
</div>
</section>
<section id="c-receiver-operative-curve-roc-visualisation-for-model-output" class="level3">
<h3 class="anchored" data-anchor-id="c-receiver-operative-curve-roc-visualisation-for-model-output">c) Receiver Operative Curve (ROC) visualisation for model output</h3>
<div class="cell">
<div class="cell-output-display">
<div id="fig-roc" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-roc-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Receiver Operative Curve visualisation for comparison of model performance based on Sensitivty and 1-Specificity</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key takeaway
</div>
</div>
<div class="callout-body-container callout-body">
<p>As we can observe from <a href="#fig-roc">Figure&nbsp;7</a>, the area under the curve (AUC) covered by the ROC of <strong>model 1 is larger when in comparison to model 2</strong>. This indicates that the <strong>model 1 is performing better than the results obtained through model 2</strong>.</p>
<p>The higher the curve is to the top left point of the plot, the higher the true positive rate of the model (measured through sensitivity) as well as the least false positive rate (measured through 1-specificity).</p>
</div>
</div>
</section>
</section>
<section id="visualisation" class="level2">
<h2 class="anchored" data-anchor-id="visualisation">3. Visualisation</h2>
<p>Here, we are required to visualise a high-dimensional data which contains 6 different variables. Due to the complexity of the data in hand and the multiple dimensions we are looking to study, it is often not possible to understand the correlation of each dimension through simple 2-dimensional plots such as scatter plots. Hence, we will be primarily studying the data through various high dimensional visualisation techniques, namely scatter plot matrix, UMAP and the grand tour.</p>
<section id="a-2d-scatter-plot-matrix" class="level3">
<h3 class="anchored" data-anchor-id="a-2d-scatter-plot-matrix">a) 2D Scatter plot matrix</h3>
<div class="cell">
<div class="cell-output-display">
<div id="fig-scatmat" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-scatmat-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;8: 2D scatter plot matrix</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key takeaway
</div>
</div>
<div class="callout-body-container callout-body">
<p>Based on the scatter plot matrix as illustrated by <a href="#fig-scatmat">Figure&nbsp;8</a>, it is <strong>difficult to ascertain any particular pattern</strong> when evaluating each of the pair of variables against one another. While there appears to be a very weak relationship between X1 and X2 owing to a correlation of 0.45, however, it is difficult to obtain any insight as the scatter points are randomly spread out on the 2D space. The remaining pair of variables show even weaker correlation, <strong>thereby indicating that each of the pair of variables are non-linearly related to one another.</strong></p>
</div>
</div>
</section>
<section id="b-non-linear-dimension-reduction-using-umap" class="level3">
<h3 class="anchored" data-anchor-id="b-non-linear-dimension-reduction-using-umap">b) Non-linear dimension reduction using UMAP</h3>
<p>The uniform manifold approximation and projection (UMAP) compares the interpoint distances with what might be expected if the data was uniformly distributed in the high dimensional shapes.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-umap" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-umap-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;9: UMAP representation of the data</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Based on the UMAP representation of the data on a 2D space upon reducing the dimensions into UMAP1 and UMAP2, we can observe that the data points have segregated into two regions of the plane, thereby creating <strong>two clusters</strong>. On the bottom left of the 2D space, we can clearly recognise the cluster due to most points concentrating close to one another. However, for the remaining set of the data, there is a high variance and these points cover a wide space on the 2D plane. While some of those points appear to be concentrating in the center (possibly due to clumping), however, the remaining points are much more widely spread.</p>
<p>Hence, we can expect <strong>a fair number of outliers</strong> while visualising the second cluster.</p>
</div>
</div>
</section>
<section id="c-high-dimensional-data-visualisation-using-the-grand-tour" class="level3">
<h3 class="anchored" data-anchor-id="c-high-dimensional-data-visualisation-using-the-grand-tour">c) High-dimensional data visualisation using the grand tour</h3>
<p>While we have already visualised the data on the 2D space by looking at the correlation among the variables, we now attempt to visualise the high-dimensional data in its true form by creating a tour which is an animation of the data points in the multi-dimensional space. The main advantage of this technique is that there is no information lost when drawing insights as we are effectively looking at all the data points in its original dimensions.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-c7gif" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-c7gif-1.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;10: High-dimesional tour for the C7 dataset</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key takeaway
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>While analysing the tour as illustrated by <a href="#fig-c7gif">Figure&nbsp;10</a>, we can observe the presence of a particular cluster of points which are concentrated close to one another. This was previously detected in <a href="#fig-umap">Figure&nbsp;9</a> aswell.</p></li>
<li><p>In addition to the above finding, we can also observe that the points other than those in the identified cluster appear to be entirely on the plane generated by the axes X1 and X2.This information was not possible to obtain from <a href="#fig-umap">Figure&nbsp;9</a> due to its inherent functionality of reducing all the dimensions to two dimensions, thereby reducing the interpretability of the plot.</p></li>
<li><p>There also appears to be a particular orientation of the dimensions when the scatter points <strong>are linearly arranged</strong>. This was observed <strong>through a combination of the dimensions X3,X5 and X6</strong>.</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="dimension-reduction" class="level2">
<h2 class="anchored" data-anchor-id="dimension-reduction">4. Dimension reduction</h2>
<p>In this exercise, we are required to analyse a dataset which contains multiple number of variables as illustrated by <a href="#tbl-cricket">Table&nbsp;2</a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-cricket" class="anchored">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Table&nbsp;2: A sample of the high-dimensional data containing statistics of Women’s Cricket</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Player</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Start</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">End</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Matches</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Innings</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NotOuts</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Runs</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HighScore</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Average</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BallsFaced</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">StrikeRate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Hundreds</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Fifties</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Ducks</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Fours</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Sixes</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Overs</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Maidens</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Wickets</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Economy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">FourWickets</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">FiveWickets</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MM Lanning</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">132</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">3405</td>
<td style="text-align: right;">133</td>
<td style="text-align: right;">36.61290</td>
<td style="text-align: right;">2926</td>
<td style="text-align: right;">116.37047</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">405</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">6.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">6.500000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">AJ Healy</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">2024</td>
<td style="text-align: right;">153</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">2795</td>
<td style="text-align: right;">148</td>
<td style="text-align: right;">24.51754</td>
<td style="text-align: right;">2164</td>
<td style="text-align: right;">129.15896</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">372</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BL Mooney</td>
<td style="text-align: right;">2016</td>
<td style="text-align: right;">2024</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">2764</td>
<td style="text-align: right;">117</td>
<td style="text-align: right;">41.25373</td>
<td style="text-align: right;">2238</td>
<td style="text-align: right;">123.50313</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">362</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">EA Perry</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">2024</td>
<td style="text-align: right;">151</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">1841</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">31.74138</td>
<td style="text-align: right;">1585</td>
<td style="text-align: right;">116.15142</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">163</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">401.5</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">125</td>
<td style="text-align: right;">5.845707</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EJ Villani</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">2018</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">1369</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">28.52083</td>
<td style="text-align: right;">1158</td>
<td style="text-align: right;">118.22107</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">177</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">AJ Blackwell</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">2017</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">81</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">1314</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">21.19355</td>
<td style="text-align: right;">1414</td>
<td style="text-align: right;">92.92786</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">87</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">14.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>In order to obtain insights from the data, we need to study the various variables in the current dataset. However, with the high number of variables present, it makes it extremely complicated to individually study each pair of variables.</p>
<p>In this exercise, we will apply a dimensionality reduction technique called the Principal Componenent Analysis (PCA). This technique is based on creating a linear combination of the variables such that the variance in the data is maximised, and are mutually uncorrelated.</p>
<section id="implementation-of-pca-in-the-current-dataset" class="level3">
<h3 class="anchored" data-anchor-id="implementation-of-pca-in-the-current-dataset">Implementation of PCA in the current dataset</h3>
<p>The chunk below provides the code required to compute the PCA for the current data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>cricket_pca <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(df_cricket[,<span class="dv">2</span><span class="sc">:</span><span class="fu">dim</span>(df_cricket)[<span class="dv">2</span>]],<span class="at">scale=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="a-summary-of-the-pca" class="level4">
<h4 class="anchored" data-anchor-id="a-summary-of-the-pca">a) Summary of the PCA</h4>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-summary" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;3: Summary of the PCA computation for Women’s cricket data</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; color: white !important; background-color: rgba(117, 112, 179, 255) !important;"></th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC1</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC2</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC3</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC4</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC5</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC6</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC7</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC8</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC9</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC10</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC11</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC12</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC13</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC14</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC15</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC16</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC17</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC18</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC19</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC20</th>
<th data-quarto-table-cell-role="th" style="text-align: right; color: white !important; background-color: rgba(117, 112, 179, 255) !important;">PC21</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; width: 2.5em; color: white !important; background-color: rgba(117, 112, 179, 255) !important; width: 2.5em;">Variance</td>
<td style="text-align: right; width: 2.5em;">9.38</td>
<td style="text-align: right; width: 2.5em;">4.44</td>
<td style="text-align: right; width: 2.5em;">1.96</td>
<td style="text-align: right; width: 2.5em;">1.14</td>
<td style="text-align: right; width: 2.5em;">0.97</td>
<td style="text-align: right; width: 2.5em;">0.83</td>
<td style="text-align: right; width: 2.5em;">0.65</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: right;">0.17</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 2.5em; color: white !important; background-color: rgba(117, 112, 179, 255) !important; width: 2.5em;">Proportion</td>
<td style="text-align: right; width: 2.5em;">0.45</td>
<td style="text-align: right; width: 2.5em;">0.21</td>
<td style="text-align: right; width: 2.5em;">0.09</td>
<td style="text-align: right; width: 2.5em;">0.05</td>
<td style="text-align: right; width: 2.5em;">0.05</td>
<td style="text-align: right; width: 2.5em;">0.04</td>
<td style="text-align: right; width: 2.5em;">0.03</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 2.5em; color: white !important; background-color: rgba(117, 112, 179, 255) !important; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">Cum. prop</td>
<td style="text-align: right; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.45</td>
<td style="text-align: right; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.66</td>
<td style="text-align: right; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.75</td>
<td style="text-align: right; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.81</td>
<td style="text-align: right; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.85</td>
<td style="text-align: right; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.89</td>
<td style="text-align: right; width: 2.5em; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.92</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.95</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.96</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.97</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.98</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.98</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.99</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">0.99</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">1.00</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">1.00</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">1.00</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">1.00</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">1</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">1</td>
<td style="text-align: right; color: white !important; background-color: rgba(202, 102, 39, 255) !important;">1</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p><a href="#tbl-summary">Table&nbsp;3</a> provides a succinct summary of the variance of each principal component and the proportion of variance explained by that particular principal componenet (PC).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key takeaway
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="#tbl-summary">Table&nbsp;3</a> would allow us to obtain the ideal number of PCs which would capture the most amount of variance in the data, at the same time, being able to discard some of the PCs which do not contribute much to explain the variance. In this manner, we not only obtain the important PCs, but also reduce the overall complexity of the model by reducing the overall dimension of the data.</p>
</div>
</div>
</section>
<section id="b-biplot-generation-for-pc1-and-pc2" class="level4">
<h4 class="anchored" data-anchor-id="b-biplot-generation-for-pc1-and-pc2">b) Biplot generation for PC1 and PC2</h4>
<div class="cell">
<div class="cell-output-display">
<div id="fig-biplot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/fig-biplot-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;11: Biplot illustration of PC1 and PC2</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-biplot">Figure&nbsp;11</a> illustrates the biplot distribution for the first two PCs of the data.</p>
</section>
<section id="c-choosing-the-appropriate-number-of-pcs" class="level4">
<h4 class="anchored" data-anchor-id="c-choosing-the-appropriate-number-of-pcs">c) Choosing the appropriate number of PCs</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="assign01-submission_Arindom_32779267_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p>Hadley Wickham, Dianne Cook, Heike Hofmann, Andreas Buja (2011). tourr: An R Package for Exploring Multivariate Data with Projections. Journal of Statistical Software, 40(2), 1-18. URL http://www.jstatsoft.org/v40/i02/.</p>
<p>Kuhn et al., (2020). Tidymodels: a collection of packages for modeling and machine learning using tidyverse principles. https://www.tidymodels.org</p>
<p>OpenAI (2023). ChatGPT (version 3.5) [Large language model]. https://chat.openai.com/chat, full script of conversation <a href="https://chat.openai.com/share/746c4f77-9b7b-4c3b-867a-826f639b91aa">here</a></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>